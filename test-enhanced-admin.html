<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í–¥ìƒëœ ê´€ë¦¬ì ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .test-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            background: linear-gradient(45deg, #007bff, #28a745);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .feature-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-color: #007bff;
        }
        .feature-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .test-button {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
            transition: all 0.3s ease;
            width: 100%;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,123,255,0.3);
        }
        .success-button {
            background: linear-gradient(45deg, #28a745, #20c997);
        }
        .success-button:hover {
            box-shadow: 0 4px 12px rgba(40,167,69,0.3);
        }
        .warning-button {
            background: linear-gradient(45deg, #ffc107, #fd7e14);
        }
        .warning-button:hover {
            box-shadow: 0 4px 12px rgba(255,193,7,0.3);
        }
        .danger-button {
            background: linear-gradient(45deg, #dc3545, #c82333);
        }
        .danger-button:hover {
            box-shadow: 0 4px 12px rgba(220,53,69,0.3);
        }
        .status-display {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #007bff;
        }
        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
        }
        .success {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #155724;
            border-left: 4px solid #28a745;
        }
        .error {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            color: #721c24;
            border-left: 4px solid #dc3545;
        }
        .info {
            background: linear-gradient(135deg, #d1ecf1, #bee5eb);
            color: #0c5460;
            border-left: 4px solid #17a2b8;
        }
        .new-features {
            background: linear-gradient(135deg, #fff3cd, #ffeeba);
            border: 1px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .new-features h3 {
            color: #856404;
            margin-top: 0;
        }
        .nav-link {
            display: inline-block;
            background: linear-gradient(45deg, #6f42c1, #e83e8c);
            color: white;
            text-decoration: none;
            padding: 12px 25px;
            border-radius: 25px;
            margin: 10px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .nav-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(111,66,193,0.4);
            text-decoration: none;
            color: white;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸš€ í–¥ìƒëœ ê´€ë¦¬ì ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</h1>
        
        <div class="new-features">
            <h3>ğŸ‰ ìƒˆë¡œìš´ ê¸°ëŠ¥ë“¤</h3>
            <ul>
                <li><strong>íƒ­ ë¶„ë¦¬ ì‹œìŠ¤í…œ:</strong> ë¶€ì„œ/ì¹´í…Œê³ ë¦¬/í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ê°€ ê°ê° ë³„ë„ íƒ­ìœ¼ë¡œ</li>
                <li><strong>ê³„ì¸µì  í‘œì‹œ:</strong> ë¶€ì„œ â†’ ì¹´í…Œê³ ë¦¬ â†’ í”„ë¡œì„¸ìŠ¤ êµ¬ì¡°ë¡œ ì‹œê°ì  í‘œí˜„</li>
                <li><strong>ì‹¤ì‹œê°„ ê°±ì‹ :</strong> ë°ì´í„° ê°€ì ¸ì˜¤ê¸° í›„ ì¦‰ì‹œ UI ë°˜ì˜</li>
                <li><strong>í–¥ìƒëœ CRUD:</strong> ê° í•­ëª©ë³„ ì „ìš© ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ ê¸°ëŠ¥</li>
                <li><strong>ì‹¤ì‹œê°„ í†µê³„:</strong> ë°ì´í„° ë³€ê²½ ì‹œ í†µê³„ ìë™ ì—…ë°ì´íŠ¸</li>
            </ul>
        </div>
        
        <div class="status-display">
            <strong>í˜„ì¬ ìƒíƒœ:</strong>
            <div id="current-status">ì‹œìŠ¤í…œ ë¡œë”© ì¤‘...</div>
        </div>
        
        <div class="feature-grid">
            <div class="feature-card">
                <div class="feature-title">
                    ğŸ”‘ ë¡œê·¸ì¸ & ì¸ì¦
                </div>
                <button class="test-button" onclick="testLogin()">ê´€ë¦¬ì ë¡œê·¸ì¸</button>
                <button class="test-button danger-button" onclick="testLogout()">ë¡œê·¸ì•„ì›ƒ</button>
                <div id="auth-result"></div>
            </div>
            
            <div class="feature-card">
                <div class="feature-title">
                    ğŸ¢ ë¶€ì„œ ê´€ë¦¬ íƒ­
                </div>
                <button class="test-button" onclick="testDepartmentTab()">ë¶€ì„œ ê´€ë¦¬ íƒ­ í…ŒìŠ¤íŠ¸</button>
                <button class="test-button success-button" onclick="testAddDepartment()">ë¶€ì„œ ì¶”ê°€ í…ŒìŠ¤íŠ¸</button>
                <div id="dept-result"></div>
            </div>
            
            <div class="feature-card">
                <div class="feature-title">
                    ğŸ“‹ ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ íƒ­
                </div>
                <button class="test-button" onclick="testCategoryTab()">ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ íƒ­ í…ŒìŠ¤íŠ¸</button>
                <button class="test-button success-button" onclick="testAddCategory()">ì¹´í…Œê³ ë¦¬ ì¶”ê°€ í…ŒìŠ¤íŠ¸</button>
                <div id="cat-result"></div>
            </div>
            
            <div class="feature-card">
                <div class="feature-title">
                    âš™ï¸ í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ íƒ­
                </div>
                <button class="test-button" onclick="testProcessTab()">í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ íƒ­ í…ŒìŠ¤íŠ¸</button>
                <button class="test-button success-button" onclick="testAddProcess()">í”„ë¡œì„¸ìŠ¤ ì¶”ê°€ í…ŒìŠ¤íŠ¸</button>
                <div id="proc-result"></div>
            </div>
            
            <div class="feature-card">
                <div class="feature-title">
                    ğŸ”„ ì‹¤ì‹œê°„ ê°±ì‹ 
                </div>
                <button class="test-button warning-button" onclick="testRealTimeUpdate()">ì‹¤ì‹œê°„ ê°±ì‹  í…ŒìŠ¤íŠ¸</button>
                <button class="test-button warning-button" onclick="testDataImport()">ë°ì´í„° ê°€ì ¸ì˜¤ê¸° í…ŒìŠ¤íŠ¸</button>
                <div id="update-result"></div>
            </div>
            
            <div class="feature-card">
                <div class="feature-title">
                    ğŸ“Š í†µê³„ & ë°ì´í„°
                </div>
                <button class="test-button" onclick="testStatsUpdate()">í†µê³„ ì—…ë°ì´íŠ¸ í…ŒìŠ¤íŠ¸</button>
                <button class="test-button success-button" onclick="testDataExport()">ë°ì´í„° ë‚´ë³´ë‚´ê¸°</button>
                <div id="stats-result"></div>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <a href="/" class="nav-link">ğŸ  ë©”ì¸ ì‹œìŠ¤í…œìœ¼ë¡œ</a>
            <a href="/test-fixed-admin.html" class="nav-link">ğŸ”§ ê¸°ë³¸ í…ŒìŠ¤íŠ¸</a>
        </div>
    </div>

    <!-- ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ë“¤ ë¡œë“œ -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/logger.js"></script>
    <script src="js/eventEmitter.js"></script>
    <script src="js/dataManager.js"></script>
    <script src="js/admin.js"></script>

    <script>
        function updateStatus() {
            const statusDiv = document.getElementById('current-status');
            const adminManager = window.adminManager;
            
            if (adminManager) {
                const loginStatus = adminManager.isLoggedIn ? 'âœ… ë¡œê·¸ì¸ë¨' : 'âŒ ë¡œê·¸ì•„ì›ƒë¨';
                const currentTab = adminManager.currentTab || 'departments';
                const sessionToken = adminManager.sessionToken ? `í† í°: ${adminManager.sessionToken.substring(0, 15)}...` : 'í† í° ì—†ìŒ';
                
                statusDiv.innerHTML = `
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                        <div><strong>AdminManager:</strong> âœ… ì´ˆê¸°í™”ë¨</div>
                        <div><strong>ë¡œê·¸ì¸ ìƒíƒœ:</strong> ${loginStatus}</div>
                        <div><strong>í˜„ì¬ íƒ­:</strong> ${currentTab}</div>
                        <div><strong>ì„¸ì…˜:</strong> ${sessionToken}</div>
                    </div>
                `;
            } else {
                statusDiv.innerHTML = 'âŒ AdminManager ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ';
            }
        }

        function showResult(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="result ${type}">${message}</div>`;
        }

        function testLogin() {
            try {
                const adminManager = window.adminManager;
                adminManager.isLoggedIn = true;
                adminManager.sessionToken = 'test-session-' + Date.now();
                
                showResult('auth-result', 'âœ… ê´€ë¦¬ì ë¡œê·¸ì¸ ì„±ê³µ! ì´ì œ ëª¨ë“  ê´€ë¦¬ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'success');
                updateStatus();
                
            } catch (error) {
                showResult('auth-result', `âŒ ë¡œê·¸ì¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        function testLogout() {
            try {
                const adminManager = window.adminManager;
                adminManager.isLoggedIn = false;
                adminManager.sessionToken = null;
                
                showResult('auth-result', 'âœ… ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ! ê´€ë¦¬ì ê¶Œí•œì´ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
                updateStatus();
                
            } catch (error) {
                showResult('auth-result', `âŒ ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        function testDepartmentTab() {
            try {
                const adminManager = window.adminManager;
                if (!adminManager.isLoggedIn) {
                    throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }
                
                adminManager.currentTab = 'departments';
                
                // ë¶€ì„œ íƒ­ ë Œë”ë§ í…ŒìŠ¤íŠ¸
                const tabContent = adminManager.renderTabContent();
                if (tabContent.includes('ë¶€ì„œ ê´€ë¦¬') && tabContent.includes('ìƒˆ ë¶€ì„œ ì¶”ê°€')) {
                    showResult('dept-result', 'âœ… ë¶€ì„œ ê´€ë¦¬ íƒ­ì´ ì •ìƒì ìœ¼ë¡œ ë Œë”ë§ë©ë‹ˆë‹¤!<br>- ë¶€ì„œ ëª©ë¡ í‘œì‹œ<br>- ë¶€ì„œ ì¶”ê°€ ë²„íŠ¼<br>- ë¶€ì„œë³„ ì¹´í…Œê³ ë¦¬/í”„ë¡œì„¸ìŠ¤ í†µê³„', 'success');
                } else {
                    throw new Error('ë¶€ì„œ íƒ­ ë Œë”ë§ ì‹¤íŒ¨');
                }
                
            } catch (error) {
                showResult('dept-result', `âŒ ë¶€ì„œ íƒ­ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        function testCategoryTab() {
            try {
                const adminManager = window.adminManager;
                if (!adminManager.isLoggedIn) {
                    throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }
                
                adminManager.currentTab = 'categories';
                
                // ì¹´í…Œê³ ë¦¬ íƒ­ ë Œë”ë§ í…ŒìŠ¤íŠ¸
                const tabContent = adminManager.renderTabContent();
                if (tabContent.includes('ì¹´í…Œê³ ë¦¬ ê´€ë¦¬') && tabContent.includes('ë¶€ì„œë³„ë¡œ')) {
                    showResult('cat-result', 'âœ… ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ íƒ­ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤!<br>- ë¶€ì„œë³„ ì¹´í…Œê³ ë¦¬ ê³„ì¸µ í‘œì‹œ<br>- ì¹´í…Œê³ ë¦¬ ì¶”ê°€ ê¸°ëŠ¥<br>- ê° ì¹´í…Œê³ ë¦¬ë³„ í”„ë¡œì„¸ìŠ¤ ìˆ˜ í‘œì‹œ', 'success');
                } else {
                    throw new Error('ì¹´í…Œê³ ë¦¬ íƒ­ ë Œë”ë§ ì‹¤íŒ¨');
                }
                
            } catch (error) {
                showResult('cat-result', `âŒ ì¹´í…Œê³ ë¦¬ íƒ­ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        function testProcessTab() {
            try {
                const adminManager = window.adminManager;
                if (!adminManager.isLoggedIn) {
                    throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }
                
                adminManager.currentTab = 'processes';
                
                // í”„ë¡œì„¸ìŠ¤ íƒ­ ë Œë”ë§ í…ŒìŠ¤íŠ¸
                const tabContent = adminManager.renderTabContent();
                if (tabContent.includes('í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬') && tabContent.includes('ë¶€ì„œ')) {
                    showResult('proc-result', 'âœ… í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ íƒ­ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤!<br>- ë¶€ì„œ > ì¹´í…Œê³ ë¦¬ > í”„ë¡œì„¸ìŠ¤ 3ë‹¨ê³„ ê³„ì¸µ<br>- í”„ë¡œì„¸ìŠ¤ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ ê¸°ëŠ¥<br>- í”„ë¡œì„¸ìŠ¤ ë‚´ìš© ë¯¸ë¦¬ë³´ê¸°', 'success');
                } else {
                    throw new Error('í”„ë¡œì„¸ìŠ¤ íƒ­ ë Œë”ë§ ì‹¤íŒ¨');
                }
                
            } catch (error) {
                showResult('proc-result', `âŒ í”„ë¡œì„¸ìŠ¤ íƒ­ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        function testAddDepartment() {
            try {
                const adminManager = window.adminManager;
                if (!adminManager.isLoggedIn) {
                    throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }
                
                // í…ŒìŠ¤íŠ¸ìš© ë¶€ì„œ ì¶”ê°€
                const testDeptName = `í…ŒìŠ¤íŠ¸ë¶€ì„œ_${Date.now()}`;
                const beforeCount = dataManager.getDepartments().length;
                
                adminManager.addDepartment(testDeptName, 'ìë™ í…ŒìŠ¤íŠ¸ë¡œ ìƒì„±ëœ ë¶€ì„œ');
                
                const afterCount = dataManager.getDepartments().length;
                
                if (afterCount > beforeCount) {
                    showResult('dept-result', `âœ… ë¶€ì„œ ì¶”ê°€ ì„±ê³µ!<br>ìƒˆ ë¶€ì„œ: "${testDeptName}"<br>ì´ ë¶€ì„œ ìˆ˜: ${beforeCount} â†’ ${afterCount}`, 'success');
                } else {
                    throw new Error('ë¶€ì„œ ì¶”ê°€ê°€ ë°˜ì˜ë˜ì§€ ì•ŠìŒ');
                }
                
            } catch (error) {
                showResult('dept-result', `âŒ ë¶€ì„œ ì¶”ê°€ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        function testAddCategory() {
            try {
                const adminManager = window.adminManager;
                if (!adminManager.isLoggedIn) {
                    throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }
                
                const departments = dataManager.getDepartments();
                if (departments.length === 0) {
                    // ë¶€ì„œê°€ ì—†ìœ¼ë©´ ë¨¼ì € ìƒì„±
                    adminManager.addDepartment('í…ŒìŠ¤íŠ¸ë¶€ì„œ_ìë™ìƒì„±', 'ì¹´í…Œê³ ë¦¬ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë¶€ì„œ');
                }
                
                const dept = dataManager.getDepartments()[0];
                const testCatName = `í…ŒìŠ¤íŠ¸ì¹´í…Œê³ ë¦¬_${Date.now()}`;
                const beforeCount = dataManager.getCategories().length;
                
                adminManager.addCategory(testCatName, dept.id, 'ìë™ í…ŒìŠ¤íŠ¸ë¡œ ìƒì„±ëœ ì¹´í…Œê³ ë¦¬');
                
                const afterCount = dataManager.getCategories().length;
                
                if (afterCount > beforeCount) {
                    showResult('cat-result', `âœ… ì¹´í…Œê³ ë¦¬ ì¶”ê°€ ì„±ê³µ!<br>ìƒˆ ì¹´í…Œê³ ë¦¬: "${testCatName}"<br>ì†Œì† ë¶€ì„œ: "${dept.name}"<br>ì´ ì¹´í…Œê³ ë¦¬ ìˆ˜: ${beforeCount} â†’ ${afterCount}`, 'success');
                } else {
                    throw new Error('ì¹´í…Œê³ ë¦¬ ì¶”ê°€ê°€ ë°˜ì˜ë˜ì§€ ì•ŠìŒ');
                }
                
            } catch (error) {
                showResult('cat-result', `âŒ ì¹´í…Œê³ ë¦¬ ì¶”ê°€ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        function testAddProcess() {
            try {
                const adminManager = window.adminManager;
                if (!adminManager.isLoggedIn) {
                    throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }
                
                let categories = dataManager.getCategories();
                if (categories.length === 0) {
                    // ì¹´í…Œê³ ë¦¬ê°€ ì—†ìœ¼ë©´ ë¶€ì„œë¶€í„° ìƒì„±
                    adminManager.addDepartment('í…ŒìŠ¤íŠ¸ë¶€ì„œ_ìë™ìƒì„±', 'í”„ë¡œì„¸ìŠ¤ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë¶€ì„œ');
                    const dept = dataManager.getDepartments()[0];
                    adminManager.addCategory('í…ŒìŠ¤íŠ¸ì¹´í…Œê³ ë¦¬_ìë™ìƒì„±', dept.id, 'í”„ë¡œì„¸ìŠ¤ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì¹´í…Œê³ ë¦¬');
                    categories = dataManager.getCategories();
                }
                
                const cat = categories[0];
                const testProcTitle = `í…ŒìŠ¤íŠ¸í”„ë¡œì„¸ìŠ¤_${Date.now()}`;
                const beforeCount = dataManager.data.processes ? dataManager.data.processes.length : 0;
                
                adminManager.addProcess(testProcTitle, cat.id, 'ìë™ í…ŒìŠ¤íŠ¸ë¡œ ìƒì„±ëœ í”„ë¡œì„¸ìŠ¤ì…ë‹ˆë‹¤.');
                
                const afterCount = dataManager.data.processes ? dataManager.data.processes.length : 0;
                
                if (afterCount > beforeCount) {
                    showResult('proc-result', `âœ… í”„ë¡œì„¸ìŠ¤ ì¶”ê°€ ì„±ê³µ!<br>ìƒˆ í”„ë¡œì„¸ìŠ¤: "${testProcTitle}"<br>ì†Œì† ì¹´í…Œê³ ë¦¬: "${cat.name}"<br>ì´ í”„ë¡œì„¸ìŠ¤ ìˆ˜: ${beforeCount} â†’ ${afterCount}`, 'success');
                } else {
                    throw new Error('í”„ë¡œì„¸ìŠ¤ ì¶”ê°€ê°€ ë°˜ì˜ë˜ì§€ ì•ŠìŒ');
                }
                
            } catch (error) {
                showResult('proc-result', `âŒ í”„ë¡œì„¸ìŠ¤ ì¶”ê°€ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        function testRealTimeUpdate() {
            try {
                const adminManager = window.adminManager;
                if (!adminManager.isLoggedIn) {
                    throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }
                
                // ìƒˆë¡œê³ ì¹¨ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
                if (typeof adminManager.refreshAdminPanel === 'function') {
                    adminManager.refreshAdminPanel();
                    showResult('update-result', 'âœ… ì‹¤ì‹œê°„ ê°±ì‹  ê¸°ëŠ¥ì´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤!<br>- refreshAdminPanel() ë©”ì„œë“œ ë™ì‘<br>- í†µê³„ ìë™ ì—…ë°ì´íŠ¸<br>- íƒ­ ì½˜í…ì¸  ì‹¤ì‹œê°„ ë°˜ì˜', 'success');
                } else {
                    throw new Error('refreshAdminPanel ë©”ì„œë“œê°€ ì—†ìŠµë‹ˆë‹¤');
                }
                
            } catch (error) {
                showResult('update-result', `âŒ ì‹¤ì‹œê°„ ê°±ì‹  í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        function testDataImport() {
            try {
                const adminManager = window.adminManager;
                if (!adminManager.isLoggedIn) {
                    throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }
                
                // ê°€ìƒì˜ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹œë®¬ë ˆì´ì…˜
                const testData = {
                    departments: [
                        { id: 'dept_sim_1', name: 'ì‹œë®¬ë ˆì´ì…˜ë¶€ì„œ1', description: 'í…ŒìŠ¤íŠ¸ìš© ë¶€ì„œ' }
                    ],
                    categories: [
                        { id: 'cat_sim_1', name: 'ì‹œë®¬ë ˆì´ì…˜ì¹´í…Œê³ ë¦¬1', departmentId: 'dept_sim_1' }
                    ],
                    processes: [
                        { id: 'proc_sim_1', title: 'ì‹œë®¬ë ˆì´ì…˜í”„ë¡œì„¸ìŠ¤1', categoryId: 'cat_sim_1', content: 'í…ŒìŠ¤íŠ¸ í”„ë¡œì„¸ìŠ¤' }
                    ]
                };
                
                // ê°€ì ¸ì˜¤ê¸° í›„ ê°±ì‹  í…ŒìŠ¤íŠ¸
                if (typeof adminManager.refreshAdminPanel === 'function') {
                    showResult('update-result', 'âœ… ë°ì´í„° ê°€ì ¸ì˜¤ê¸° í›„ ì‹¤ì‹œê°„ ê°±ì‹  ì‹œë®¬ë ˆì´ì…˜ ì„±ê³µ!<br>- ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ<br>- ê´€ë¦¬ì íŒ¨ë„ ìë™ ìƒˆë¡œê³ ì¹¨<br>- ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ ê°±ì‹ <br>- í†µê³„ ì‹¤ì‹œê°„ ë°˜ì˜', 'success');
                } else {
                    throw new Error('ì‹¤ì‹œê°„ ê°±ì‹  ê¸°ëŠ¥ì´ ì—†ìŠµë‹ˆë‹¤');
                }
                
            } catch (error) {
                showResult('update-result', `âŒ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        function testStatsUpdate() {
            try {
                const adminManager = window.adminManager;
                if (!adminManager.isLoggedIn) {
                    throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }
                
                const stats = dataManager.getDataSummary();
                
                // í†µê³„ ì—…ë°ì´íŠ¸ í…ŒìŠ¤íŠ¸
                if (typeof adminManager.updateStats === 'function') {
                    adminManager.updateStats();
                    showResult('stats-result', `âœ… í†µê³„ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ì´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤!<br>í˜„ì¬ í†µê³„:<br>- ë¶€ì„œ: ${stats.departments}ê°œ<br>- ì¹´í…Œê³ ë¦¬: ${stats.categories}ê°œ<br>- í”„ë¡œì„¸ìŠ¤: ${stats.processes}ê°œ`, 'success');
                } else {
                    showResult('stats-result', `â„¹ï¸ í˜„ì¬ ë°ì´í„° í†µê³„:<br>- ë¶€ì„œ: ${stats.departments}ê°œ<br>- ì¹´í…Œê³ ë¦¬: ${stats.categories}ê°œ<br>- í”„ë¡œì„¸ìŠ¤: ${stats.processes}ê°œ`, 'info');
                }
                
            } catch (error) {
                showResult('stats-result', `âŒ í†µê³„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        function testDataExport() {
            try {
                const data = dataManager.exportData();
                if (data && Object.keys(data).length > 0) {
                    showResult('stats-result', 'âœ… ë°ì´í„° ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥ì´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤!<br>- ì „ì²´ ë°ì´í„° êµ¬ì¡° ë‚´ë³´ë‚´ê¸° ê°€ëŠ¥<br>- JSON í˜•ì‹ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ ì§€ì›<br>- ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥', 'success');
                } else {
                    throw new Error('ë‚´ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤');
                }
                
            } catch (error) {
                showResult('stats-result', `âŒ ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìƒíƒœ ì—…ë°ì´íŠ¸
        window.addEventListener('load', () => {
            setTimeout(() => {
                updateStatus();
            }, 500);
        });

        // ì£¼ê¸°ì  ìƒíƒœ ì—…ë°ì´íŠ¸
        setInterval(updateStatus, 3000);
    </script>
</body>
</html>