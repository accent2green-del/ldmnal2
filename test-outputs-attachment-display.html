<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚°ì¶œë¬¼ ì²¨ë¶€íŒŒì¼ í‘œì‹œ í…ŒìŠ¤íŠ¸</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
        }
        
        .test-title {
            background: #dc3545;
            color: white;
            padding: 10px 15px;
            margin: -20px -20px 20px -20px;
            border-radius: 6px 6px 0 0;
            font-size: 18px;
            font-weight: bold;
        }
        
        .comparison {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-column {
            flex: 1;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
        }
        
        .comparison-column h4 {
            margin-top: 0;
            text-align: center;
        }
        
        .before {
            background: #fff3cd;
            border-color: #ffeaa7;
        }
        
        .after {
            background: #d4edda;
            border-color: #c3e6cb;
        }
        
        .sample-data {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ” ì‚°ì¶œë¬¼ ì²¨ë¶€íŒŒì¼ í‘œì‹œ í…ŒìŠ¤íŠ¸</h1>
        <p>ì‚°ì¶œë¬¼ì— ì²¨ë¶€ëœ íŒŒì¼ì´ ìƒì„¸ì •ë³´ì°½ì—ì„œ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>
        
        <!-- í…ŒìŠ¤íŠ¸ 1: ë¬¸ì œ ë¶„ì„ -->
        <div class="test-section">
            <div class="test-title">âŒ ë¬¸ì œ ìƒí™©: ì‚°ì¶œë¬¼ ì²¨ë¶€íŒŒì¼ì´ ì¡°íšŒë˜ì§€ ì•ŠìŒ</div>
            
            <div class="comparison">
                <div class="comparison-column before">
                    <h4>ğŸš« ì´ì „ ìƒíƒœ (ë¬¸ì œ)</h4>
                    <p><code>renderItemList(process.outputs, 'ğŸ“')</code></p>
                    <p>ì„¸ ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ <code>withAttachment</code>ê°€ <code>false</code> (ê¸°ë³¸ê°’)</p>
                    <p>â†’ ì‚°ì¶œë¬¼ì— ì²¨ë¶€íŒŒì¼ì´ ìˆì–´ë„ í‘œì‹œë˜ì§€ ì•ŠìŒ</p>
                </div>
                <div class="comparison-column after">
                    <h4>âœ… ìˆ˜ì • í›„ (í•´ê²°)</h4>
                    <p><code>renderItemList(process.outputs, 'ğŸ“', true)</code></p>
                    <p>ì„¸ ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ <code>withAttachment</code>ë¥¼ <code>true</code>ë¡œ ì„¤ì •</p>
                    <p>â†’ ì‚°ì¶œë¬¼ ì²¨ë¶€íŒŒì¼ì´ ì •ìƒ í‘œì‹œë¨</p>
                </div>
            </div>
        </div>
        
        <!-- í…ŒìŠ¤íŠ¸ 2: ì‹¤ì œ ë Œë”ë§ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <div class="test-title">ğŸ§ª ì‹¤ì œ ë Œë”ë§ í…ŒìŠ¤íŠ¸</div>
            
            <div class="sample-data">
                <h4>ìƒ˜í”Œ ë°ì´í„°:</h4>
                <pre id="sample-data-display">ë¡œë”© ì¤‘...</pre>
            </div>
            
            <h4>ğŸ“„ ì‚°ì¶œë¬¼ í‘œì‹œ (ì²¨ë¶€íŒŒì¼ í¬í•¨):</h4>
            <div id="outputs-with-attachments" class="detail-item-list">
                ë¡œë”© ì¤‘...
            </div>
            
            <h4>ğŸ“š ì°¸ê³ ìë£Œ í‘œì‹œ (ë¹„êµìš©):</h4>
            <div id="references-with-attachments" class="detail-item-list">
                ë¡œë”© ì¤‘...
            </div>
        </div>
        
        <!-- í…ŒìŠ¤íŠ¸ 3: ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <div class="test-title">ğŸ’¾ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</div>
            
            <p>ìœ„ì— í‘œì‹œëœ ì²¨ë¶€íŒŒì¼ ë§í¬ë¥¼ í´ë¦­í•˜ì—¬ ë‹¤ìš´ë¡œë“œê°€ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>
            
            <div style="background: #e7f3ff; padding: 15px; border-radius: 6px; margin: 15px 0;">
                <strong>âœ… í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸:</strong>
                <ul>
                    <li>ì‚°ì¶œë¬¼ì— ì²¨ë¶€íŒŒì¼ ë§í¬ê°€ í‘œì‹œë˜ëŠ”ê°€?</li>
                    <li>ì²¨ë¶€íŒŒì¼ ì´ë¦„ê³¼ í¬ê¸°ê°€ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œë˜ëŠ”ê°€?</li>
                    <li>ì²¨ë¶€íŒŒì¼ ë§í¬ í´ë¦­ ì‹œ ë‹¤ìš´ë¡œë“œê°€ ì‹œì‘ë˜ëŠ”ê°€?</li>
                    <li>ë‹¤ìš´ë¡œë“œëœ íŒŒì¼ì˜ ë‚´ìš©ì´ ì˜¬ë°”ë¥¸ê°€?</li>
                    <li>ì°¸ê³ ìë£Œì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ í‘œì‹œë˜ëŠ”ê°€?</li>
                </ul>
            </div>
            
            <div id="test-results" style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 6px;">
                <h4>í…ŒìŠ¤íŠ¸ ê²°ê³¼:</h4>
                <p>ì½˜ì†”ì„ í™•ì¸í•˜ì—¬ ë‹¤ìš´ë¡œë“œ ì‹œë„ ë¡œê·¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/content-renderer.js"></script>
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“ ì‚°ì¶œë¬¼ ì²¨ë¶€íŒŒì¼ í‘œì‹œ í…ŒìŠ¤íŠ¸ ì‹œì‘');
            
            // ìƒ˜í”Œ ë°ì´í„° ìƒì„± (ì²¨ë¶€íŒŒì¼ í¬í•¨)
            const sampleOutputs = [
                {
                    text: "ë¯¼ì›ì‹ ì²­ì„œ ì–‘ì‹",
                    attachment: {
                        name: "ë¯¼ì›ì‹ ì²­ì„œ.pdf",
                        type: "application/pdf",
                        size: 2048,
                        lastModified: Date.now(),
                        data: "data:application/pdf;base64," + btoa("ìƒ˜í”Œ PDF ë‚´ìš©")
                    }
                },
                {
                    text: "ì²˜ë¦¬ ê²°ê³¼ ë³´ê³ ì„œ",
                    attachment: {
                        name: "ì²˜ë¦¬ê²°ê³¼.docx",
                        type: "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
                        size: 4096,
                        lastModified: Date.now(),
                        data: "data:application/vnd.openxmlformats-officedocument.wordprocessingml.document;base64," + btoa("ìƒ˜í”Œ ë¬¸ì„œ ë‚´ìš©")
                    }
                },
                {
                    text: "ìŠ¹ì¸ ì™„ë£Œ í†µì§€ì„œ",
                    attachment: null // ì²¨ë¶€íŒŒì¼ ì—†ëŠ” ê²½ìš°
                }
            ];
            
            const sampleReferences = [
                {
                    text: "ê´€ë ¨ ë²•ë ¹ì§‘",
                    attachment: {
                        name: "ê´€ë ¨ë²•ë ¹.pdf",
                        type: "application/pdf",
                        size: 1536,
                        lastModified: Date.now(),
                        data: "data:application/pdf;base64," + btoa("ìƒ˜í”Œ ë²•ë ¹ì§‘ ë‚´ìš©")
                    }
                },
                {
                    text: "ì—…ë¬´ ì²˜ë¦¬ ê°€ì´ë“œ",
                    attachment: null
                }
            ];
            
            // ìƒ˜í”Œ ë°ì´í„° í‘œì‹œ
            document.getElementById('sample-data-display').textContent = JSON.stringify({
                outputs: sampleOutputs,
                references: sampleReferences
            }, null, 2);
            
            // ContentRenderer ì¸ìŠ¤í„´ìŠ¤ê°€ ë¡œë“œëœ í›„ í…ŒìŠ¤íŠ¸
            setTimeout(() => {
                if (window.contentRenderer) {
                    // ì‚°ì¶œë¬¼ ë Œë”ë§ (ì²¨ë¶€íŒŒì¼ í¬í•¨)
                    const outputsHtml = contentRenderer.renderItemList(sampleOutputs, 'ğŸ“', true);
                    document.getElementById('outputs-with-attachments').innerHTML = outputsHtml;
                    
                    // ì°¸ê³ ìë£Œ ë Œë”ë§ (ë¹„êµìš©)
                    const referencesHtml = contentRenderer.renderItemList(sampleReferences, 'ğŸ“š', true);
                    document.getElementById('references-with-attachments').innerHTML = referencesHtml;
                    
                    console.log('âœ… ë Œë”ë§ ì™„ë£Œ');
                    console.log('ì‚°ì¶œë¬¼ HTML:', outputsHtml);
                    console.log('ì°¸ê³ ìë£Œ HTML:', referencesHtml);
                } else {
                    console.error('âŒ ContentRendererë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    document.getElementById('outputs-with-attachments').innerHTML = '<p style="color: red;">ContentRenderer ë¡œë“œ ì‹¤íŒ¨</p>';
                }
            }, 500);
            
            // ë‹¤ìš´ë¡œë“œ í…ŒìŠ¤íŠ¸ ë¡œê·¸
            let downloadAttempts = 0;
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('attachment-download-link')) {
                    downloadAttempts++;
                    const filename = e.target.getAttribute('data-attachment-name');
                    
                    const resultsDiv = document.getElementById('test-results');
                    resultsDiv.innerHTML += `
                        <div style="margin: 10px 0; padding: 10px; background: #d4edda; border-radius: 4px;">
                            <strong>[${new Date().toLocaleTimeString()}] ë‹¤ìš´ë¡œë“œ ì‹œë„ #${downloadAttempts}</strong><br>
                            íŒŒì¼ëª…: ${filename}
                        </div>
                    `;
                }
            });
        });
    </script>
</body>
</html>