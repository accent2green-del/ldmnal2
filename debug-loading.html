<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading Debug</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .debug-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .debug-section h3 { margin-top: 0; }
        pre { background: #f5f5f5; padding: 10px; overflow: auto; }
        .status-info { color: blue; }
        .status-error { color: red; }
        .status-success { color: green; }
    </style>
</head>
<body>
    <h1>üîç Loading Debug Tool</h1>
    
    <div class="debug-section">
        <h3>Page State</h3>
        <div id="page-state">Loading...</div>
    </div>
    
    <div class="debug-section">
        <h3>Loading Elements</h3>
        <div id="loading-elements">Checking...</div>
    </div>
    
    <div class="debug-section">
        <h3>DOM Content</h3>
        <div id="dom-content">Analyzing...</div>
    </div>

    <script>
        function checkPageState() {
            const stateDiv = document.getElementById('page-state');
            
            // Check for loading overlays
            const loadingOverlay = document.getElementById('loading-overlay');
            const bodyClasses = document.body.className;
            const htmlClasses = document.documentElement.className;
            
            let html = '';
            html += `<div>Document Ready State: ${document.readyState}</div>`;
            html += `<div>Body Classes: "${bodyClasses || 'none'}"</div>`;
            html += `<div>HTML Classes: "${htmlClasses || 'none'}"</div>`;
            html += `<div>Loading Overlay Element: ${loadingOverlay ? 'Found' : 'Not found'}</div>`;
            
            if (loadingOverlay) {
                html += `<div>Loading Overlay Classes: "${loadingOverlay.className}"</div>`;
                html += `<div>Loading Overlay Visible: ${loadingOverlay.style.display !== 'none' && !loadingOverlay.classList.contains('hidden')}</div>`;
            }
            
            stateDiv.innerHTML = html;
        }
        
        function checkLoadingElements() {
            const elementsDiv = document.getElementById('loading-elements');
            
            // Find all elements with loading-related content
            const allElements = document.querySelectorAll('*');
            const loadingElements = [];
            
            allElements.forEach(el => {
                const text = el.textContent || '';
                if (text.includes('Î°úÎî©') || text.includes('Loading') || text.includes('Ï≤òÎ¶¨ Ï§ë') || 
                    text.includes('Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò') || el.classList.toString().includes('loading')) {
                    loadingElements.push({
                        tag: el.tagName,
                        id: el.id,
                        classes: el.className,
                        text: text.substring(0, 100)
                    });
                }
            });
            
            let html = `<div>Found ${loadingElements.length} loading-related elements:</div>`;
            loadingElements.forEach(el => {
                html += `<div style="margin: 5px 0; padding: 5px; background: #f9f9f9;">`;
                html += `Tag: ${el.tag}, ID: "${el.id}", Classes: "${el.classes}"<br>`;
                html += `Text: "${el.text}"`;
                html += `</div>`;
            });
            
            elementsDiv.innerHTML = html;
        }
        
        function checkDOMContent() {
            const contentDiv = document.getElementById('dom-content');
            
            // Get main content areas
            const navigation = document.getElementById('navigation-tree');
            const contentBody = document.getElementById('content-body');
            const mainContent = document.getElementById('main-content');
            
            let html = '';
            
            if (navigation) {
                html += `<div><strong>Navigation Tree:</strong> Found</div>`;
                html += `<div>Navigation Content: "${navigation.textContent.substring(0, 100)}..."</div>`;
            } else {
                html += `<div class="status-error">Navigation Tree: Not found</div>`;
            }
            
            if (contentBody) {
                html += `<div><strong>Content Body:</strong> Found</div>`;
                html += `<div>Content Body: "${contentBody.textContent.substring(0, 100)}..."</div>`;
            } else {
                html += `<div class="status-error">Content Body: Not found</div>`;
            }
            
            if (mainContent) {
                html += `<div><strong>Main Content:</strong> Found</div>`;
                html += `<div>Main Content Classes: "${mainContent.className}"</div>`;
            } else {
                html += `<div class="status-error">Main Content: Not found</div>`;
            }
            
            contentDiv.innerHTML = html;
        }
        
        function runDiagnostics() {
            checkPageState();
            checkLoadingElements();
            checkDOMContent();
        }
        
        // Run diagnostics immediately
        runDiagnostics();
        
        // Also run when DOM is ready
        document.addEventListener('DOMContentLoaded', runDiagnostics);
        
        // And run periodically to catch changes
        setInterval(runDiagnostics, 2000);
        
        console.log('Loading debug tool initialized');
    </script>
</body>
</html>